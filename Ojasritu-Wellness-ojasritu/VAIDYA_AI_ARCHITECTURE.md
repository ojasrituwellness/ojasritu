# ğŸ”„ Vaidya AI - Architecture & Flow Diagrams

## 1. System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER BROWSER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   Frontend (React + Vite)                                  â”‚
â”‚   â”œâ”€â”€ App.jsx                                              â”‚
â”‚   â””â”€â”€ AyurvedicChatbot Component                           â”‚
â”‚       â”œâ”€â”€ PanditRobotLogo (SVG)                           â”‚
â”‚       â”œâ”€â”€ Chat Window                                      â”‚
â”‚       â”œâ”€â”€ Language Toggle (EN/HI)                         â”‚
â”‚       â””â”€â”€ Message History                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP/REST API
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DJANGO BACKEND                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   URL Routes (wellness_project/urls.py)                   â”‚
â”‚   â””â”€â”€ /api/chat/ â†’ chatbot_improved.py                   â”‚
â”‚                                                             â”‚
â”‚   Chat Handler (shop/chatbot_improved.py)                â”‚
â”‚   â”œâ”€â”€ Validate Input                                      â”‚
â”‚   â”œâ”€â”€ Select Language Prompt                              â”‚
â”‚   â”œâ”€â”€ Try Gemini API                                      â”‚
â”‚   â”‚   â”œâ”€â”€ Build Context from History                     â”‚
â”‚   â”‚   â”œâ”€â”€ Generate Prompt                                â”‚
â”‚   â”‚   â””â”€â”€ Call genai.generate_content()                  â”‚
â”‚   â”œâ”€â”€ On Success: Return Response + Slok                 â”‚
â”‚   â””â”€â”€ On Fail: Fall back to Smart Responses              â”‚
â”‚                                                             â”‚
â”‚   Helper Functions:                                        â”‚
â”‚   â”œâ”€â”€ get_relevant_slok() â†’ Select Sanskrit verse        â”‚
â”‚   â””â”€â”€ get_smart_fallback() â†’ Keyword-based response      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ Gemini API Call
                     â”‚ (google-generativeai)
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            GOOGLE GENERATIVE AI (GEMINI)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   Model: gemini-pro                                        â”‚
â”‚   Temperature: 0.7 (Balanced)                             â”‚
â”‚   Max Tokens: 500                                         â”‚
â”‚   Configuration:                                           â”‚
â”‚   â”œâ”€â”€ top_p: 0.95                                        â”‚
â”‚   â”œâ”€â”€ top_k: 40                                          â”‚
â”‚   â””â”€â”€ Safety: BLOCK_NONE (for health content)            â”‚
â”‚                                                             â”‚
â”‚   Generates: Ayurveda-expert responses                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Chat Request Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User Types Message â”‚
â”‚  (EN or HI)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Format JSON Request      â”‚
â”‚ {                        â”‚
â”‚   message: "...",        â”‚
â”‚   language: "en",        â”‚
â”‚   history: [...]         â”‚
â”‚ }                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send POST to /api/chat/  â”‚
â”‚ Include CSRF Token       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Django Receives Request          â”‚
â”‚ â”œâ”€ Validate input                â”‚
â”‚ â”œâ”€ Check language (en/hi)        â”‚
â”‚ â””â”€ Validate CSRF token           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Try Gemini API                      â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ YES: API Available & Key Set â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                        â”‚
â”‚            â–¼                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Get System Prompt            â”‚   â”‚
â”‚ â”‚ (Language-specific)          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                        â”‚
â”‚            â–¼                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Build Full Prompt            â”‚   â”‚
â”‚ â”‚ = System + History + Message â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                        â”‚
â”‚            â–¼                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Call model.generate_content()â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚                        â”‚
â”‚            â–¼                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Response Received?           â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚            â”‚         â”‚               â”‚
â”‚         YES â”‚         â”‚ NO           â”‚
â”‚            â–¼         â–¼               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚ â”‚ Return AI Response   â”‚            â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                        â”‚
â”‚                        â–¼
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ NO: Use Smart Fallback       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚            â”‚
â”‚            â–¼
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ Match keywords in message    â”‚
â”‚ â”‚ Return relevant response     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Add Relevant Slok             â”‚
â”‚ (Sanskrit verse)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON Response                     â”‚
â”‚ {                                 â”‚
â”‚   status: "success",              â”‚
â”‚   message: "...",                 â”‚
â”‚   slok: "...",                    â”‚
â”‚   source: "gemini"|"fallback",    â”‚
â”‚   language: "en",                 â”‚
â”‚   timestamp: "2024-11-18...",     â”‚
â”‚   model: "Gemini Pro"             â”‚
â”‚ }                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Send Back to Frontend        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend Receives & Parses JSON  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Display Message in Chat Window   â”‚
â”‚ â”œâ”€ Show Bot Avatar (Logo)        â”‚
â”‚ â”œâ”€ Display Message Text          â”‚
â”‚ â”œâ”€ Show Slok (if present)        â”‚
â”‚ â””â”€ Add Timestamp                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auto-scroll to Bottom        â”‚
â”‚ Scroll to Latest Message     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ready for Next Message       â”‚
â”‚ User can send another query  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Component Hierarchy

```
App
â””â”€â”€ AyurvedicChatbot
    â”œâ”€â”€ PanditRobotLogo (Toggle Button)
    â”‚   â”œâ”€â”€ SVG Path Elements
    â”‚   â”œâ”€â”€ Gradients (Metal, Skin, Tilak)
    â”‚   â””â”€â”€ Animated Effects
    â”‚
    â”œâ”€â”€ Chat Window (if isOpen)
    â”‚   â”œâ”€â”€ Header
    â”‚   â”‚   â”œâ”€â”€ PanditRobotLogo (32px)
    â”‚   â”‚   â”œâ”€â”€ Title & Subtitle
    â”‚   â”‚   â””â”€â”€ Close Button
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Language Selector
    â”‚   â”‚   â”œâ”€â”€ Hindi Button
    â”‚   â”‚   â””â”€â”€ English Button
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Messages Area
    â”‚   â”‚   â”œâ”€â”€ Message Components (map)
    â”‚   â”‚   â”‚   â”œâ”€â”€ Avatar (Logo or User)
    â”‚   â”‚   â”‚   â”œâ”€â”€ Content
    â”‚   â”‚   â”‚   â”œâ”€â”€ Slok Display
    â”‚   â”‚   â”‚   â””â”€â”€ Timestamp
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ Typing Indicator (if loading)
    â”‚   â”‚   â”‚   â”œâ”€â”€ PanditRobotLogo
    â”‚   â”‚   â”‚   â””â”€â”€ Blinking Dots
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ Scroll Container
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Quick Actions (if new)
    â”‚   â”‚   â”œâ”€â”€ Dosha Analysis
    â”‚   â”‚   â”œâ”€â”€ Tips
    â”‚   â”‚   â”œâ”€â”€ Products
    â”‚   â”‚   â””â”€â”€ Consultation
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Input Form
    â”‚   â”‚   â”œâ”€â”€ Text Input
    â”‚   â”‚   â””â”€â”€ Send Button
    â”‚   â”‚
    â”‚   â””â”€â”€ Footer
    â”‚       â””â”€â”€ Disclaimer
    â”‚
    â””â”€â”€ CSS Styles
        â”œâ”€â”€ Container
        â”œâ”€â”€ Toggle Button
        â”œâ”€â”€ Chat Window
        â”œâ”€â”€ Header
        â”œâ”€â”€ Messages
        â”œâ”€â”€ Input Form
        â””â”€â”€ Animations
```

---

## 4. Data Flow (Redux-style)

```
STATE: AyurvedicChatbot Component
â”œâ”€â”€ messages: Array
â”‚   â””â”€â”€ [{id, type, content, timestamp, slok}, ...]
â”œâ”€â”€ input: String
â”œâ”€â”€ language: "en" | "hi"
â”œâ”€â”€ loading: Boolean
â””â”€â”€ isOpen: Boolean

ACTIONS:
â”œâ”€â”€ handleSendMessage()
â”‚   â”œâ”€â”€ Add user message to state
â”‚   â”œâ”€â”€ Clear input
â”‚   â”œâ”€â”€ Set loading = true
â”‚   â”œâ”€â”€ Make API call
â”‚   â”œâ”€â”€ On success: Add bot message
â”‚   â”œâ”€â”€ On error: Add error message
â”‚   â””â”€â”€ Set loading = false
â”‚
â”œâ”€â”€ setLanguage(lang)
â”‚   â””â”€â”€ Update language state
â”‚
â”œâ”€â”€ setIsOpen(bool)
â”‚   â””â”€â”€ Toggle chat window
â”‚
â””â”€â”€ handleQuickAction(action)
    â””â”€â”€ Simulate user message + auto-send
```

---

## 5. API Response Structure

```
Success Response:
{
  "status": "success",
  "message": "The Ayurvedic response here...",
  "language": "en",
  "source": "gemini",                    â† or "fallback"
  "slok": {
    "hi": "à¤¸à¤‚à¤¸à¥à¤•à¥ƒà¤¤ à¤¶à¥à¤²à¥‹à¤• à¤¯à¤¹à¤¾à¤‚...",
    "en": "Sanskrit slok here...",
    "meaning_hi": "à¤…à¤°à¥à¤¥...",
    "meaning_en": "Meaning..."
  },
  "timestamp": "2024-11-18T10:30:00Z",
  "model": "Gemini Pro",
  "tokens_used": 145
}

Error Response:
{
  "status": "error",
  "message": "Error message for user",
  "error": "Technical error details",
  "timestamp": "2024-11-18T10:30:00Z"
}
```

---

## 6. File Dependencies

```
Frontend:
src/
â”œâ”€â”€ App.jsx
â”‚   â””â”€â”€ imports components
â”‚       â”œâ”€â”€ AyurvedicChatbot.jsx
â”‚       â”‚   â”œâ”€â”€ imports PanditRobotLogo.jsx
â”‚       â”‚   â””â”€â”€ imports AyurvedicChatbot.css
â”‚       â””â”€â”€ other components
â”‚
Backend:
shop/
â”œâ”€â”€ chatbot_improved.py
â”‚   â”œâ”€â”€ imports django rest
â”‚   â”œâ”€â”€ imports google.generativeai
â”‚   â”œâ”€â”€ defines AYURVEDA_SLOKS
â”‚   â”œâ”€â”€ defines FALLBACK_RESPONSES
â”‚   â”œâ”€â”€ exports chat_with_ayurveda_ai()
â”‚   â”œâ”€â”€ exports dosha_analyzer()
â”‚   â””â”€â”€ exports get_ayurveda_tips()
â”‚
wellness_project/
â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ imports chatbot_improved
â”‚       â””â”€â”€ includes /api/chat/ endpoint
â”‚
requirements.txt
â”œâ”€â”€ google-generativeai
â””â”€â”€ other dependencies
```

---

## 7. Message Flow Sequence Diagram

```
User                Frontend              Backend            Gemini API
â”‚                     â”‚                     â”‚                   â”‚
â”‚â”€â”€Type Messageâ”€â”€â”€â†’   â”‚                     â”‚                   â”‚
â”‚                     â”‚                     â”‚                   â”‚
â”‚                     â”‚â”€â”€POST /api/chat/â”€â”€â†’ â”‚                   â”‚
â”‚                     â”‚ {message, lang}    â”‚                   â”‚
â”‚                     â”‚                     â”‚â”€â”€Generate Promptâ”€â†’â”‚
â”‚                     â”‚                     â”‚                   â”‚
â”‚                     â”‚                     â”‚                   â”‚
â”‚                     â”‚                     â”‚â†â”€Responseâ”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                     â”‚                     â”‚ {text, tokens}   â”‚
â”‚                     â”‚                     â”‚                   â”‚
â”‚                     â”‚                     â”‚â”€â”€Add Slokâ”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                     â”‚                     â”‚                   â”‚
â”‚                     â”‚â†â”€JSON Responseâ”€â”€â”€â”€â”€â”€â”‚                   â”‚
â”‚                     â”‚ {msg, slok, status} â”‚                   â”‚
â”‚                     â”‚                     â”‚                   â”‚
â”‚â†â”€Display Messageâ”€â”€  â”‚                     â”‚                   â”‚
â”‚  in Chat Window     â”‚                     â”‚                   â”‚
â”‚                     â”‚                     â”‚                   â”‚
```

---

## 8. Gemini API Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Gemini Pro Configuration         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚ Model: gemini-pro                     â”‚
â”‚ â”‚                                     â”‚
â”‚ â”œâ”€ GenerationConfig:                 â”‚
â”‚ â”‚  â”œâ”€ temperature: 0.7               â”‚
â”‚ â”‚  â”‚  â””â”€ Balanced (not too random)   â”‚
â”‚ â”‚  â”‚                                 â”‚
â”‚ â”‚  â”œâ”€ max_output_tokens: 500         â”‚
â”‚ â”‚  â”‚  â””â”€ Enough for full response    â”‚
â”‚ â”‚  â”‚                                 â”‚
â”‚ â”‚  â”œâ”€ top_p: 0.95                    â”‚
â”‚ â”‚  â”‚  â””â”€ Nucleus sampling            â”‚
â”‚ â”‚  â”‚                                 â”‚
â”‚ â”‚  â””â”€ top_k: 40                      â”‚
â”‚ â”‚     â””â”€ Top-k sampling              â”‚
â”‚ â”‚                                     â”‚
â”‚ â”œâ”€ Safety Settings:                  â”‚
â”‚ â”‚  â””â”€ HARM_CATEGORY_DANGEROUS:       â”‚
â”‚ â”‚     â””â”€ BLOCK_NONE                  â”‚
â”‚ â”‚        (For health/ayurveda info)   â”‚
â”‚ â”‚                                     â”‚
â”‚ â””â”€ API Key: AIzaSyCFEb3...           â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Error Handling Tree

```
API Call
â”‚
â”œâ”€ Network Error
â”‚  â””â”€ Use Fallback (Smart Response)
â”‚     â””â”€ Return response with source: "fallback"
â”‚
â”œâ”€ API Key Invalid
â”‚  â””â”€ Log Error
â”‚  â””â”€ Use Fallback
â”‚
â”œâ”€ Rate Limit Exceeded
â”‚  â””â”€ Log Warning
â”‚  â””â”€ Use Fallback
â”‚
â”œâ”€ Content Blocked (Safety)
â”‚  â””â”€ Log Info
â”‚  â””â”€ Use Fallback
â”‚
â”œâ”€ Empty Response
â”‚  â””â”€ Log Warning
â”‚  â””â”€ Use Fallback
â”‚
â””â”€ Success
   â”œâ”€ Add Slok
   â”œâ”€ Format Response
   â””â”€ Return to Frontend
```

---

## 10. Logo Rendering Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PanditRobotLogo     â”‚
â”‚  (React Component)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SVG Renderer        â”‚
â”‚  â””â”€ viewBox="0 0 100 100"
â”‚  â””â”€ width={size}     â”‚
â”‚  â””â”€ height={size}    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gradients (defs)    â”‚
â”‚  â”œâ”€ metalGradient    â”‚
â”‚  â”œâ”€ skinGradient     â”‚
â”‚  â””â”€ tilakGradient    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Shape Elements      â”‚
â”‚  â”œâ”€ Head (circle)    â”‚
â”‚  â”œâ”€ Face (rect)      â”‚
â”‚  â”œâ”€ Tilak (ellipse)  â”‚
â”‚  â”œâ”€ Eyes (circles)   â”‚
â”‚  â”œâ”€ Body (rect)      â”‚
â”‚  â”œâ”€ Arms & Legs      â”‚
â”‚  â””â”€ Aura (circle)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CSS Styling         â”‚
â”‚  â”œâ”€ Filters          â”‚
â”‚  â”œâ”€ Transform        â”‚
â”‚  â””â”€ Opacity          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser Renders     â”‚
â”‚  Final Image         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**All diagrams show the complete architecture and data flow of Vaidya AI Chatbot! ğŸ¤–âœ¨**
